{"version":3,"sources":["./src/app/files/files.module.ts","./src/app/files/attr.directive.ts","./src/app/files/files.component.ts","./src/app/files/files.component.html"],"names":[],"mappings":"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","file":"files-files-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FilesComponent } from './files.component';\nimport { RouterModule } from '@angular/router';\nimport { AttrDirective } from './attr.directive';\n\n\n\n@NgModule({\n  declarations: [FilesComponent, AttrDirective],\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: \"\",\n        component: FilesComponent\n      }\n    ])\n  ]\n})\nexport class FilesModule { }\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\n\n@Directive({\n  selector: '[appAttr]'\n})\n\nexport class AttrDirective implements OnInit {\n  @Input() appAttr: {\n    name: string;\n    type: string,\n    content: string\n  };\n  constructor(private el: ElementRef<HTMLElement>) { }\n  ngOnInit() {\n    (<HTMLElement>this.el.nativeElement.childNodes[0]).innerHTML = this.getIcon();\n    (<HTMLElement>this.el.nativeElement.childNodes[1].childNodes[0]).innerHTML = this.appAttr.name;\n    (<HTMLElement>this.el.nativeElement.childNodes[1].childNodes[1]).innerHTML = `<span class='text-muted'>${this.appAttr.content}</span>`;\n  }\n  getIcon() {\n    return `<span class='${this.icon()}'>`;\n  }\n  icon() {\n    if (this.appAttr.type == \"folder\") return `mif-folder ${this.color()}`\n    else return `mif-file-empty ${this.color()}`\n  }\n  color() {\n    return [\"fg-cyan\", \"fg-indigo\", \"fg-teal\", \"fg-amber\", \"fg-lime\", \"fg-pink\", \"fg-orange\"][Math.floor(Math.random() * 6)];\n  }\n}\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { AppService } from '../app.service';\n@Component({\n  selector: 'app-files',\n  templateUrl: './files.component.html',\n  styleUrls: ['./files.component.scss']\n})\nexport class FilesComponent {\n  path = [];\n  constructor(private app: AppService) {\n    let a = this.app.actRoute.snapshot.queryParams.path\n    if (a == undefined) {\n      this.app.user ? this.setup(\"/\") : this.setup(\"common\");\n    } else {\n      if (a == \"/\") {\n        this.setup(\"common\");\n        return;\n      }\n      this.setup(a)\n    }\n  }\n  files = [];\n  setView(ele: HTMLElement, a: string) {\n    ele.className = \"listview\";\n    ele.classList.add(a);\n  }\n  getFiles(a: string) {\n    this.app.wait();\n    this.app.http.get(`/api/files?path=${a}`).subscribe(\n      (res: any[]) => {\n        this.files = res;\n        this.app.wait(false);\n      },\n      (err: HttpErrorResponse) => {\n        this.app.wait(false);\n        let er: string = \"عفوا الملف غير موجود\";\n        if (err.status == 500) {\n          er = \"this is a bad requres\"\n        }\n        this.app.dialogService.alert(\n          \"خطا فى طلب الملف\",\n          er,\n          \"\",\n          \"اغلاف\",\n          \"alert\"\n        ).subscribe(\n          res => {\n            this.setup(\"common\");\n          }\n        )\n      }\n    )\n  }\n  openDir(i: number) {\n    this.path.splice(i + 1);\n    this.getFiles(this.path.join(\"/\"))\n  }\n  openpath(x) {\n    this.app.dialogService.confirm(\n      \"معلومات الملف\",\n      `<table class=\"table table-border m-0 cell-border\">\n          <tbody>\n            <tr>\n              <td style=\"width:5px;\">الاسم</td>\n              <td>${x.name}</td>\n            </tr>\n            <tr>\n              <td>البيانات</td>\n              <td>${x.content}</td>\n            </tr>\n            <tr>\n              <td>النوع</td>\n              <td>${x.type}</td>\n            </tr>\n            <tr>\n              <td>العنوان</td>\n              <td style=\"user-select:all;\">${this.getUrl(x)}</td>\n            </tr>\n          <tbody>\n        </table>`,\n      \"فتح الملف\",\n      \"اغلاق\",\n      \"wiAuto\",\n      \"\",\n      \"alert\"\n    ).subscribe(\n      res => {\n        if (res == false) return;\n        if (x.type == \"folder\") {\n          this.path.push(x.name);\n          this.getFiles(this.path.join(\"/\"))\n        } else if (x.type == \"post\") {\n          window.open(`/openFile?userId=${this.app.user.id}&id=${this.getId(x.name)}`)\n        } else {\n          window.open(`/files/${this.path.join(\"/\")}/${x.name}`)\n        }\n      }\n    )\n  }\n  getUrl(x) {\n    if (x.type == \"folder\") {\n      return (`${location.origin}/files?path=${this.path.join(\"/\")}/${x.name}`)\n    } else if (x.type == \"post\") {\n      return (`${location.origin}/openFile?userId=${this.app.user.id}&id=${this.getId(x.name)}`)\n    } else {\n      return (`${location.origin}/files/${this.path.join(\"/\")}/${x.name}`)\n    }\n  }\n  setup(a: string) {\n    this.path = [a];\n    this.getFiles(this.path.join(\"/\"))\n  }\n  getId(id: string) {\n    return id.slice(6, id.lastIndexOf(\".json\"));\n  }\n}\n","<div class=\"h-100 boduApp\">\n    <div class=\"app-bar bg-cyan z-1\" data-role=\"appbar\">\n        <h5 class=\"brand no-hover fg-white m-0 mr-2\">مساعدك الشخصى</h5>\n    </div>\n    <div class=\"h-100 p-2\" style=\"overflow: auto;\">\n        <div id=\"toolbar\" class=\"my-1 p-2\">\n            <ul class=\"m-0\">\n                <li *ngFor=\"let x of path;index as i\" (click)=\"openDir(i)\">\n                    <div [ngClass]=\"{'active':path.length -1 == i}\">{{x}}</div>\n                    <span class=\"mif-chevron-thin-left\"></span>\n                </li>\n            </ul>\n            <div class=\"toolbar\" data-role=\"buttongroup\">\n                <button class=\"tool-button rounded active\" (click)=\"setView(view,'view-content')\">\n                    <span class=\"mif-list\"></span>\n                </button>\n                <button class=\"tool-button rounded\" (click)=\"setView(view,'view-tiles')\">\n                    <span class=\"mif-folder\"></span>\n                </button>\n                <button class=\"tool-button rounded\" (click)=\"setView(view,'view-icons-medium')\">\n                    <span class=\"mif-medium\"></span>\n                </button>\n                <button class=\"tool-button rounded\" (click)=\"setView(view,'view-icons-large')\">\n                    <span class=\"icon\" style=\"font-weight: bold;\">L</span>\n                </button>\n            </div>\n        </div>\n        <ul class=\"listview view-content\" #view>\n            <li class=\"node\" (click)=\"openpath(x)\" [appAttr]=\"x\" *ngFor=\"let x of files\">\n                <span class=\"icon\"></span>\n                <div class=\"data\">\n                    <div class=\"caption\"></div>\n                    <div class=\"content\"></div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>"],"sourceRoot":"webpack:///"}